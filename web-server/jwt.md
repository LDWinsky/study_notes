# jwt 的学习

## Json Web Token

Json Web Token 可以明白这是个Token。Token 是有权访问接口的凭证。

### 结构

Header.Payload.Signature

Header 起到解释说明的作用，一般是 {type: 'jwt', alg: 'HS256'}
Payload 部分自定义信息和token的创建与过期时间。{...whatevetuwant, iat: the created time(s), exp: the expire time(s)}
Signature: 用一个哈希算法为函数，以 Header，Payload, 和只保存在服务端的保密密钥为参数生成的哈希值。

以上3个值，在分别使用 base64Url 算法转为字符串连在一起就是Token的格式了。很明显最重要的信息如过期跟真数据都放在Payload，安全性由Signature来做防止篡改。

最简单的。服务端生成jwt发给客户端。客户端在发送接口请求的时候带上Token。服务端通过跟计算Signature的算法再来一遍计算，对比Signature是否匹配。来判断是否为自己认可的用户。

### 特点

* 客户端存储信息，但是客户端在没有密钥的情况下，无法篡改。
* 服务端除了存放一个密钥，其他关于jwt的信息都没有，只需要验证jwt信息是否过期与是否篡改。
* 因为客户无法篡改，所以某种形式上可以在jwt附加上服务器才有的权限，发送给指定用户。变相的赋予客户某些权力，即使客户都没有登录。

总结就是：很明显他的特点就是简单，实现简单、原理简单，安全也有一定的保障，客户端无法篡改。

### 应用场景

* 一次性验证

感觉 jwt 最适合的就是一次性验证了。将一个API的路径、参数、有效时间加入生成带有 jwt 格式token连接。交给客户来确认是否触发。最常用的就是邮箱的认证了。

* api 的身份认证

<!-- 我们的的 API 大部分都需要提供用户的信息，这样才能来确认API请求发是否有权限可以调用接口。那么这个信息可以直接发用户ID， -->

### 能否拿来做会话登录 ？

个人认为是不适合的。会遇到很多问题。

<!-- 这里需要有一定的session使用经验，我不足需要添加 -->

1. 注销变得

### SSO 单点登录

SSO是在多个应用系统中，用户只需要登录一次就可以访问所有相互信任的应用系统。（登录微博，再访问新浪邮箱📮不用再登录）

